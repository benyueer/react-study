<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>

<body>
  <script src="./scheduler.development.js"></script>
  <script>
    function printA(didTimeout) {
      const start = new Date().getTime()
      while (new Date().getTime() - start < 7) { }
      console.log("A didTimeout：", didTimeout)
    }
    function printB(didTimeout) {
      const start = new Date().getTime()
      while (new Date().getTime() - start < 3) { }
      console.log("B didTimeout：", didTimeout)
    }
    function printC(didTimeout) {
      const start = new Date().getTime()
      while (new Date().getTime() - start < 4) { }
      console.log("C didTimeout：", didTimeout)
    }
    function printD(didTimeout) {
      const start = new Date().getTime()
      while (new Date().getTime() - start < 7) { }
      console.log("D didTimeout：", didTimeout)
    }
    function printE(didTimeout) {
      const start = new Date().getTime()
      while (new Date().getTime() - start < 10) { }
      console.log("E didTimeout：", didTimeout)
    }

    // 
    // unstable_scheduleCallback(NormalPriority, printA)
    // unstable_scheduleCallback(NormalPriority, printB)
    // unstable_scheduleCallback(NormalPriority, printC)
    // unstable_scheduleCallback(NormalPriority, printD)
    // unstable_scheduleCallback(NormalPriority, printE)

    // const callbackA = unstable_scheduleCallback(NormalPriority, printA)
    // unstable_scheduleCallback(NormalPriority, printB)
    // unstable_scheduleCallback(NormalPriority, printC)
    // unstable_scheduleCallback(NormalPriority, printD)
    // unstable_scheduleCallback(NormalPriority, printE)
    // unstable_cancelCallback(callbackA);

    unstable_scheduleCallback(IdlePriority, printA)
    unstable_scheduleCallback(LowPriority, printB)
    unstable_scheduleCallback(NormalPriority, printC)
    unstable_scheduleCallback(UserBlockingPriority, printD)
    unstable_scheduleCallback(ImmediatePriority, printE);

    // function printA(didTimeout) {
    //   const start = new Date().getTime()
    //   while (new Date().getTime() - start < 100) { }
    //   console.log("A didTimeout：", didTimeout)
    // }
    // const taskA = unstable_scheduleCallback(NormalPriority, printA)
    // const currentTime = performance.now()
    // console.log(taskA)
    // console.log(currentTime)
    // const start = new Date().getTime()
    // while (new Date().getTime() - start < 3999) { }

    // const tasks = [
    //   ["C1", 4],
    //   ["C2", 6],
    //   ["C3", 7],
    // ]
    // const printF = () => {
    //   while (tasks.length > 0) {
    //     const [label, ms] = tasks.shift()
    //     const start = new Date().getTime()
    //     while (new Date().getTime() - start < ms) { }
    //     console.log(label)
    //   }
    // }
    // unstable_scheduleCallback(NormalPriority, printF);


    // const tasks = [
    //   ["C1", 4],
    //   ["C2", 6],
    //   ["C3", 7],
    // ]
    // const printG = () => {
    //   while (tasks.length > 0) {
    //     const [label, ms] = tasks.shift()
    //     const start = new Date().getTime()
    //     while (new Date().getTime() - start < ms) { }
    //     console.log(label)
    //     if (shouldYieldToHost()) {
    //       // 判断是否需要让出控制权
    //       console.log("yield：交出控制权")
    //       didYield = true
    //       return printG // 返回一个函数
    //     }
    //   }
    // }
    // unstable_scheduleCallback(NormalPriority, printG);



  </script>
</body>

</html>